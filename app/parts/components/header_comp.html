<template id="header-template">
  <header class="header">
    <h1>todos</h1>
    <label for="newTodo" class="visuallyhidden">What needs to be done?</label>
    <input class="new-todo" id="newTodo" placeholder="What needs to be done?" value="" autofocus/>
  </header>
</template>

<script>

  (function (document, window, APP) {

    const docU = (document._currentScript || document.currentScript).ownerDocument;
    const template = docU.querySelector('#header-template');

    class HeaderComponent extends HTMLElement {

      constructor() {
        super();
      }

      connectedCallback() {

        const temp = docU.importNode(template.content, true);
        this.appendChild(temp);

        this.addEvents();

      }

      addEvents() {

        const newTodo = this.querySelector('#newTodo');
        newTodo.addEventListener('keydown', this.keyDownEvent, false);

      }

      keyDownEvent(event) {

        if (Object.is(event.keyCode, window.TODO.ENTER_KEY) && !Object.is(event.target.value.length, 0)) {
          APP.store.add(event.target.value.trim());
        }

      }

    }

    window.customElements.define('header-component', HeaderComponent);

  })(document, window, APP);

</script>
